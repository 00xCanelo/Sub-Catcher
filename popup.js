document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("logOutput");document.getElementById("status");const o=document.getElementById("wildcard"),d=document.getElementById("subdomainCount"),t=document.getElementById("runScript"),e=document.createElement("button");e.id="toggleLogBtn",e.textContent="Remove Log",e.style.backgroundColor="#00c896",e.style.border="none",e.style.color="white",e.style.padding="10px 14px",e.style.borderRadius="6px",e.style.cursor="pointer",e.style.marginBottom="10px",e.style.display="block",e.style.width="100%",e.style.fontWeight="bold",e.style.fontSize="16px",e.style.transition="background 0.3s",t.insertAdjacentElement("afterend",e),e.addEventListener("mouseover",()=>{e.style.backgroundColor="#00a77b"}),e.addEventListener("mouseout",()=>{e.style.backgroundColor="#00c896"}),chrome.storage.local.get(["log","wildcard","count"],e=>{var t;t=e.log||[],n.innerHTML="",t.forEach(e=>{var t=document.createElement("p");t.textContent=e,n.appendChild(t)}),n.scrollTop=n.scrollHeight,o.textContent=e.wildcard||"-",d.textContent=e.count||0}),chrome.storage.onChanged.addListener((e,t)=>{"local"===t&&(e.wildcard&&(o.textContent=e.wildcard.newValue||"-"),e.count&&(d.textContent=e.count.newValue||"0"))}),chrome.runtime.onMessage.addListener(e=>{var t;"log"===e.type&&((t=document.createElement("p")).textContent=e.payload,n.appendChild(t),n.scrollTop=n.scrollHeight)}),t.addEventListener("click",async()=>{t.textContent="In Progress...";var[e]=await chrome.tabs.query({active:!0,currentWindow:!0});e&&e.id&&chrome.scripting.executeScript({target:{tabId:e.id},files:["content.js"]})}),e.addEventListener("click",()=>{"none"===n.style.display?(n.style.display="block",e.textContent="Remove Log"):(n.style.display="none",e.textContent="View Log")})});
